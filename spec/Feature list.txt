# Tarot App — Feature Roadmap (MVP → V1 → V2)

This document defines the feature scope and prioritization for the Tarot App:
- **MVP** proves the AI-first chat experience with mobile-optimized spread display.
- **V1** productizes the MVP (accounts, persistence, premium gating, credits/payments, search, exports).
- **V2** adds pro workflows (clients) and daily email digests.

---

## MVP Vision

> A free, open chat with an AI Tarot reader, where spreads are laid within the conversation and displayed in a mobile-friendly format.

**What we're proving:**
1. Spreads (current and past) can be conveniently displayed during a mobile chat session
2. Conversation can be flowing and low-latency without sacrificing quality or nuance
3. The AI remains anchored in relevant context across the entire interaction

---

## MVP Definitions of Done

### GUI
- [ ] Conversation and current spread are simultaneously accessible during interaction
- [ ] Spread can expand for detailed card inspection without leaving the chat
- [ ] Multiple spreads in a session can be navigated (arrows + dots indicator)
- [ ] Keyboard appearance intelligently manages spread visibility (collapse to FAB)

### AI
- [ ] User gets quick, low-latency responses for conversational turns (<1s to first token)
- [ ] Spread interpretations are nuanced and high-quality (via thinking model)
- [ ] Model remains anchored in context: question, current spread, past spreads, conversation history
- [ ] Model can derive meaningful insights across entire conversation context
- [ ] Session feels like interaction with a skilled human Tarot reader

---

## MVP Feature List

### 1) Card database (static)
- 78 cards with upright + reversed meanings
- Keywords per card

### 2) Standard spreads (built-in)
Include these standard spreads:
- **Diamond** (5 cards)
- **Energy Mix** (4 cards)
- **Blockage** (6 cards)
- **Two Paths** (8 cards)

Each spread has: `name`, `purpose`, `n_cards`, `positions[]`, `layout_descriptor`

### 3) Mobile chat interface
See `ui-spec.md` for full specification. Key features:
- Pinned spread viewer (top ~25%)
- Chat panel with streaming responses
- FAB collapse when keyboard active
- Fullscreen spread expansion
- Multi-spread navigation (← → arrows)

### 4) AI conversation system
See `ai-architecture.md` for full specification. Key features:
- Dual-model architecture (mini for conversation, thinking for interpretation)
- Tool-call pattern for seamless integration
- Streaming responses for perceived low latency
- Context management (last 20 messages + summary + active spread + spread ledger)

### 5) Reading flow (within chat)
User initiates a reading through conversation:
1. User describes question/situation
2. AI may ask clarifying questions
3. Spread selection (offered by AI or chosen by user)
4. Cards drawn (QRNG → random.org → slot machine fallback)
5. Spread displayed in pinned viewer
6. AI interprets via thinking model
7. Conversation continues for follow-up questions

### 6) RNG system
Implement cascade with provenance metadata:
1. Primary: **QRNG**
2. Fallback: **random.org**
3. Fallback: **slot-machine click selection**

Requirements:
- Uniqueness by default (no duplicates unless toggled)
- `allow_reversals` for system draws
- Record provenance in session state

### 7) Extended features (manual mode)
Available but not the primary path:
- Manual card entry
- Direct spread selection without AI guidance
- View position/card meanings without AI interpretation

---

## V1 Feature List (productization + premium layer)

### 8) User accounts
- Signup / login / logout
- Password reset

### 9) Save + history
- Save sessions (each session may contain multiple readings)
- History: list + open + delete
- Notes per reading (general + by position)
- Export/backup

### 10) Custom spread builder
- Create/edit/delete custom spreads
- Layout editor
- Validation: `len(positions) == n_cards`

### 11) Premium paywall
- AI features hidden/locked behind premium state
- Upgrade flow messaging

### 12) Credits + payments
- Credits balance + purchase
- Credits ledger (auditable)

### 13) Search & filters
- Filters: spread, date range
- Full-text search over: question + notes + AI output
- Tags per reading

### 14) Filter by card
- Example: "Show readings containing The Tower"

### 15) Card encyclopedia
- Browse/search cards
- Card detail pages

### 16) AI across history
- Example: "Summarize my love readings since October"
- Pattern mining across sessions

### 17) Quality + safety
- Rate limiting / abuse guardrails
- Disclaimers

---

## V2

- **Client support** (profiles + history per client + pro workflow)
- **Daily emails** (topic-based draw + interpretation + digest)

---

## Guardrails (implementation notes)

- Design internal objects for V1 persistence even in MVP:
  - `Reading`, `Spread`, `CardDraw`, `RngProvenance`, `AiInterpretationResult`, `ChatMessage`
- Put QRNG/random.org behind backend proxy for CORS/rate-limit handling
- Context summarization is deterministic and session-level
